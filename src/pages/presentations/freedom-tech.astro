---
import Layout from "../../layouts/Layout.astro";
---

<Layout title="Freedom Tech" description="What makes something Freedom Tech?">
  <div class="presentation">
    <div class="slides">
      <section class="slide active" id="slide-1">
        <div class="slide-content">
          <div class="grid-lines"></div>
          <h1>What Makes Something <br/><span class="text-purple font-bold">Freedom Tech?</span></h1>
          <p class="text-xl mt-8 text-gray-400">Understanding the principles of digital self-sovereignty</p>
        </div>
      </section>

      <section class="slide" id="slide-2">
        <div class="slide-content">
          <h2 class="text-3xl font-light mb-8 flex items-center">
            A Cypherpunk's Vision
          </h2>
          <blockquote class="pl-4 border-l-2 border-purple my-8 py-2">
            <p class="text-2xl italic font-light mb-4">
              "Privacy is necessary for an open society in the electronic age."
            </p>
          </blockquote>
          <div class="grid grid-cols-2 gap-8 mt-12">
            <div class="bg-dark p-6 rounded-lg border border-gray-800">
              <h3 class="text-xl mb-4 text-purple-400">The Problems</h3>
              <ul class="space-y-1">
                <li class="flex items-start">
                  <span class="text-purple mr-4">‚Ä¢</span>
                  <p>Your photos on someone else's servers</p>
                </li>
                <li class="flex items-start">
                  <span class="text-purple mr-4">‚Ä¢</span>
                  <p>Messages through others' infrastructure</p>
                </li>
                <li class="flex items-start">
                  <span class="text-purple mr-4">‚Ä¢</span>
                  <p>Money in someone else's database</p>
                </li>
              </ul>
            </div>
            <div class="bg-dark p-6 rounded-lg border border-gray-800">
              <h3 class="text-xl mb-4 text-purple-400">The Solutions</h3>
              <p>Bitcoin, Nostr, TOR, Reticulum, etc...</p>
            </div>
          </div>
        </div>
      </section>

      <section class="slide" id="slide-3">
        <div class="slide-content">
          <h2 class="text-3xl font-light mb-8 flex items-center">
            Protocols vs Platforms
          </h2>
          <div class="grid grid-cols-2 gap-12">
            <div class="relative">
              <div class="diagram-container">
                <div class="diagram platform-diagram">
                  <div class="platform-box">
                    <h3 class="text-xl mb-4">Platform A</h3>
                    <div class="users">Users</div>
                    <div class="data">Data</div>
                  </div>
                  <div class="platform-box">
                    <h3 class="text-xl mb-4">Platform B</h3>
                    <div class="users">Users</div>
                    <div class="data">Data</div>
                  </div>
                </div>
                <p class="text-center mt-4 text-red-400">‚ùå Data Silos</p>
              </div>
            </div>
            <div class="relative">
              <div class="diagram-container">
                <div class="diagram protocol-diagram">
                  <div class="protocol-layer">
                    <h3 class="text-xl mb-4">Open Protocol</h3>
                    <div class="shared-network"></div>
                  </div>
                  <div class="apps-layer">
                    <div class="app">App A</div>
                    <div class="app">App B</div>
                    <div class="app">App C</div>
                  </div>
                </div>
                <p class="text-center mt-4 text-green-400">‚úì Data Flows Freely</p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="slide" id="slide-4">
        <div class="slide-content">
          <h2 class="text-3xl font-light mb-8 flex items-center">
            Cryptography: The Foundation
          </h2>
          <div class="grid grid-cols-2 gap-8">
            <div class="bg-dark p-6 rounded-lg border border-gray-800">
              <h3 class="text-xl mb-4 text-purple-400">Sign</h3>
              <div class="crypto-diagram sign-diagram">
                <div class="key">Private Key</div>
                <div class="arrow">‚Üì</div>
                <div class="data">Public Data</div>
                <div class="arrow">‚Üì</div>
                <div class="result">Verified Authenticity</div>
              </div>
            </div>
            <div class="bg-dark p-6 rounded-lg border border-gray-800">
              <h3 class="text-xl mb-4 text-purple-400">Encrypt</h3>
              <div class="crypto-diagram encrypt-diagram">
                <div class="key">Public Key</div>
                <div class="arrow">‚Üì</div>
                <div class="data">Private Data</div>
                <div class="arrow">‚Üì</div>
                <div class="result">Only Recipient Can Read</div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="slide" id="slide-5">
        <div class="slide-content">
          <h2 class="text-3xl font-light mb-8 flex items-center">
            Software Design Principles
          </h2>
          <div class="grid grid-cols-2 gap-8">
            <div class="principle-card">
              <h3 class="text-xl mb-3">Local-first</h3>
              <p>Your data lives on your devices first, cloud second</p>
              <div class="principle-diagram">
                <div class="device">üì±</div>
                <div class="arrow">‚Üí</div>
                <div class="cloud">‚òÅÔ∏è</div>
              </div>
            </div>
            <div class="principle-card">
              <h3 class="text-xl mb-3">Unhosted</h3>
              <p>Apps run without depending on servers</p>
              <div class="principle-diagram">
                <div class="device">üíª</div>
                <div class="arrow">‚ÜîÔ∏è</div>
                <div class="device">üíª</div>
              </div>
            </div>
            <div class="principle-card">
              <h3 class="text-xl mb-3">Credible Exit</h3>
              <p>Take your data and identity elsewhere</p>
              <div class="principle-diagram">
                <div class="data">üì¶</div>
                <div class="arrow">‚ÜîÔ∏è</div>
                <div class="apps">üîÑ</div>
              </div>
            </div>
            <div class="principle-card">
              <h3 class="text-xl mb-3">Plain Text</h3>
              <p>Data in readable formats, not proprietary</p>
              <div class="principle-diagram">
                <div class="text">.txt</div>
                <div class="arrow">‚úì</div>
                <div class="binary">.bin</div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="slide" id="slide-6">
        <div class="slide-content">
          <h2 class="text-3xl font-light mb-8 flex items-center">
            Examples in Practice
          </h2>
          <div class="grid grid-cols-2 gap-12">
            <div>
              <h3 class="text-2xl mb-6 text-purple-400">Freedom Tech ‚úì</h3>
              <div class="bg-dark p-6 rounded-lg border border-gray-800">
                <ul class="space-y-4">
                  <li class="flex items-start">
                    <span class="text-green-400 mr-4">‚úì</span>
                    <p>Bitcoin: Sovereign money network</p>
                  </li>
                  <li class="flex items-start">
                    <span class="text-green-400 mr-4">‚úì</span>
                    <p>Nostr: Decentralized social protocol</p>
                  </li>
                  <li class="flex items-start">
                    <span class="text-green-400 mr-4">‚úì</span>
                    <p>PGP: End-to-end encryption</p>
                  </li>
                </ul>
              </div>
            </div>
            <div>
              <h3 class="text-2xl mb-6 text-red-400">Not Freedom Tech ‚úó</h3>
              <div class="bg-dark p-6 rounded-lg border border-gray-800">
                <ul class="space-y-4">
                  <li class="flex items-start">
                    <span class="text-red-400 mr-4">‚úó</span>
                    <p>Mastodon: Federated platforms</p>
                  </li>
                  <li class="flex items-start">
                    <span class="text-red-400 mr-4">‚úó</span>
                    <p>Web5: App-specific protocols</p>
                  </li>
                  <li class="flex items-start">
                    <span class="text-red-400 mr-4">‚úó</span>
                    <p>Signal: Centralized messaging</p>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>

    <div class="controls">
      <button id="prevSlide" class="control-btn" aria-label="Previous slide">
        <span class="text-2xl">‚Üê</span>
      </button>
      <button id="nextSlide" class="control-btn" aria-label="Next slide">
        <span class="text-2xl">‚Üí</span>
      </button>
    </div>

    <div class="slide-counter">
      <span id="currentSlideNum">1</span>/<span id="totalSlides">6</span>
    </div>
  </div>
</Layout>

<style>
  .presentation {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: var(--color-background);
  }

  .slides {
    width: 100%;
    height: 100%;
  }

  .slide {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.4s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 2rem;
  }

  .slide.active {
    opacity: 1;
    visibility: visible;
  }

  .slide-content {
    max-width: 900px;
    margin: 0 auto;
  }

  .bg-dark {
    background-color: rgba(15, 15, 15, 0.5);
  }

  .controls {
    position: fixed;
    bottom: 2rem;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 1rem;
    z-index: 10;
  }

  .control-btn {
    background: rgba(123, 104, 238, 0.1);
    border: 1px solid var(--color-purple);
    color: var(--color-purple);
    width: 3rem;
    height: 3rem;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .control-btn:hover {
    background: var(--color-purple);
    color: white;
  }

  .grid-lines {
    position: absolute;
    inset: 0;
    background-image: linear-gradient(rgba(123, 104, 238, 0.1) 1px, transparent 1px),
      linear-gradient(90deg, rgba(123, 104, 238, 0.1) 1px, transparent 1px);
    background-size: 40px 40px;
    background-position: center center;
    transform: perspective(1000px) rotateX(45deg) scale(2);
    transform-origin: center bottom;
    opacity: 0.2;
    z-index: -1;
  }

  .principle-card {
    background: rgba(15, 15, 15, 0.5);
    border: 1px solid rgba(123, 104, 238, 0.2);
    padding: 1.5rem;
    border-radius: 0.5rem;
    transition: all 0.3s ease;
  }

  .principle-card:hover {
    border-color: var(--color-purple);
    transform: translateY(-2px);
  }

  .principle-diagram {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1rem;
    margin-top: 1rem;
    font-size: 1.5rem;
  }

  .diagram-container {
    background: rgba(15, 15, 15, 0.5);
    border: 1px solid rgba(123, 104, 238, 0.2);
    padding: 1.5rem;
    border-radius: 0.5rem;
    min-height: 400px;
    display: flex;
    flex-direction: column;
  }

  .platform-diagram, .protocol-diagram {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 2rem;
    align-items: center;
    justify-content: center;
  }

  .platform-box {
    border: 1px solid rgba(255, 255, 255, 0.2);
    padding: 1rem;
    border-radius: 0.5rem;
    width: 80%;
    text-align: center;
  }

  .protocol-layer {
    border: 1px solid var(--color-purple);
    padding: 1rem;
    border-radius: 0.5rem;
    width: 100%;
    text-align: center;
  }

  .apps-layer {
    display: flex;
    gap: 1rem;
    justify-content: center;
  }

  .app {
    border: 1px solid rgba(255, 255, 255, 0.2);
    padding: 0.5rem 1rem;
    border-radius: 0.5rem;
  }

  .crypto-diagram {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1rem;
    margin-top: 2rem;
  }

  .key, .data, .result {
    padding: 0.5rem 1rem;
    border-radius: 0.5rem;
    text-align: center;
  }

  .key {
    background: rgba(123, 104, 238, 0.2);
    border: 1px solid var(--color-purple);
  }

  .data {
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
  }

  .result {
    color: var(--color-purple);
  }

  .slide-counter {
    position: fixed;
    bottom: 2rem;
    right: 2rem;
    color: var(--color-purple);
    font-family: var(--font-mono);
    font-size: 0.875rem;
  }

  @keyframes fadeIn {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .diagram-container {
    opacity: 0;
    transform: translateY(20px);
    animation: fadeIn 0.6s ease forwards;
  }

  .slide.active .diagram-container {
    animation-play-state: running;
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    let currentSlide = 1;
    const totalSlides = document.querySelectorAll('.slide').length;
    
    function showSlide(n: number) {
      const slides = document.querySelectorAll('.slide');
      
      // Adjust currentSlide if out of bounds
      if (n > totalSlides) {
        currentSlide = 1;
      } else if (n < 1) {
        currentSlide = totalSlides;
      } else {
        currentSlide = n;
      }
      
      // Hide all slides
      slides.forEach(slide => {
        slide.classList.remove('active');
      });
      
      // Show current slide
      slides[currentSlide - 1].classList.add('active');
      
      // Update counter
      const currentSlideNum = document.getElementById('currentSlideNum');
      if (currentSlideNum) {
        currentSlideNum.textContent = currentSlide.toString();
      }
    }

    // Initialize counter
    const totalSlidesElement = document.getElementById('totalSlides');
    if (totalSlidesElement) {
      totalSlidesElement.textContent = totalSlides.toString();
    }

    // Navigation event listeners
    document.getElementById('nextSlide')?.addEventListener('click', () => {
      showSlide(currentSlide + 1);
    });

    document.getElementById('prevSlide')?.addEventListener('click', () => {
      showSlide(currentSlide - 1);
    });

    // Keyboard navigation
    document.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowRight' || e.key === ' ') {
        showSlide(currentSlide + 1);
      }
      if (e.key === 'ArrowLeft') {
        showSlide(currentSlide - 1);
      }
    });

    // Touch navigation
    let touchStartX = 0;
    document.addEventListener('touchstart', (e) => {
      touchStartX = e.changedTouches[0].screenX;
    });

    document.addEventListener('touchend', (e) => {
      const touchEndX = e.changedTouches[0].screenX;
      if (touchEndX < touchStartX) {
        showSlide(currentSlide + 1); // Swipe left
      }
      if (touchEndX > touchStartX) {
        showSlide(currentSlide - 1); // Swipe right
      }
    });
  });
</script>